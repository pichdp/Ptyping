<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typing Speed Test</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        .word-container { font-size: 24px; margin: 20px; }
        .word span { padding: 2px; }
        .correct { color: green; }
        .incorrect { color: red; }
        input { font-size: 20px; width: 80%; padding: 10px; margin-top: 10px; }
    </style>
</head>
<body>
    <h1>Typing Speed Test</h1>
    <div class="word-container" id="wordContainer"></div>
    <input type="text" id="typingInput" autofocus>
    <p id="timer">Time: 60s</p>
    <p id="result"></p>
    <button onclick="restartTest()">Restart</button>

    <script>
        let words = ["apple", "banana", "cat", "dog", "sun", "phone", "tree", "chair", "book", "orange", "pen", "cloud", "river", "water", "house", "star", "mountain", "desk", "sky", "laptop"];
        let generatedWords = [];
        let wordIndex = 0;
        let startTime;
        let timerInterval;
        let timeLeft = 60;
        let correctWords = 0;
        let incorrectWords = 0;

        function generateWords() {
            generatedWords = [];
            for (let i = 0; i < 200; i++) {
                generatedWords.push(words[Math.floor(Math.random() * words.length)]);
            }
            displayWords();
        }

        function displayWords() {
            let displayText = generatedWords.slice(wordIndex, wordIndex + 20).map(word => `<span>${word}</span>`).join(" ");
            document.getElementById("wordContainer").innerHTML = displayText;
        }

        document.getElementById("typingInput").addEventListener("input", function (e) {
            if (!startTime) {
                startTime = new Date().getTime();
                startTimer();
            }
            let typed = e.target.value;
            let currentWord = generatedWords[wordIndex];
            let spans = document.querySelectorAll(".word-container span");
            let typedLetters = typed.split("");
            let wordLetters = currentWord.split("");
            spans[0].innerHTML = "";
            wordLetters.forEach((letter, i) => {
                let span = document.createElement("span");
                span.textContent = letter;
                if (typedLetters[i] === undefined) {
                    span.style.color = "black";
                } else if (typedLetters[i] === letter) {
                    span.style.color = "green";
                } else {
                    span.style.color = "red";
                }
                spans[0].appendChild(span);
            });
            
            if (typed.trim() === currentWord) {
                wordIndex++;
                e.target.value = "";
                if (wordIndex % 10 === 0) {
                    displayWords();
                }
            }
        });

        function startTimer() {
            timerInterval = setInterval(() => {
                timeLeft--;
                document.getElementById("timer").textContent = `Time: ${timeLeft}s`;
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    document.getElementById("typingInput").disabled = true;
                    showResults();
                }
            }, 1000);
        }

        function showResults() {
            let totalWords = wordIndex;
            let timeTaken = (60 - timeLeft) / 60;
            let wpm = Math.round(totalWords / timeTaken);
            document.getElementById("result").textContent = `WPM: ${wpm}`;
        }

        function restartTest() {
            wordIndex = 0;
            startTime = null;
            timeLeft = 60;
            document.getElementById("typingInput").disabled = false;
            document.getElementById("typingInput").value = "";
            document.getElementById("timer").textContent = "Time: 60s";
            document.getElementById("result").textContent = "";
            clearInterval(timerInterval);
            generateWords();
        }

        generateWords();
    </script>
</body>
</html>
